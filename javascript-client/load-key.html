<!DOCTYPE html>
<html>
    <head>
        <meta charset="UTF-8">
        <title>Load key</title>
          <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
          <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
         <script src="./js-libs/system-lib.js"></script>
          <script type="text/javascript">
            function load_private_key_from_user_choice() {
                        // Load private key from file
                document.getElementById("id_file-key").addEventListener("change", function(event) {
                    const file = event.target.files[0];
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        privateKeyPem = e.target.result;
                        console.log("Private key loaded.");
                        localStorage.setItem(getKeyName(), privateKeyPem);
                        document.getElementById("id_key-output").value = privateKeyPem
                    };
                    reader.readAsText(file);
                });

            }//function load_private_key_from_user_choice() {

    </script>

    </head>
    <body class="p-4" onload="load_private_key_from_user_choice();">
        <div class="fixed-box">
            <h5 class="mb-4">Upload private key file:</h5>
            <form>
                <div class="mb-3">
                    <input type="file" class="form-control" id="id_file-key" name="file-key">
                </div>
            <br>
            <br>
            </form>
            <div class="mb-3">
            <button  type="button" class="btn btn-primary btn-dark btn-block" onclick="window.close();">Close</button>
                <!-- <table style="width:100%">
                    <tr>
                        <th><button  type="button" class="btn btn-primary btn-dark btn-block" onclick="main();">Confirm</button></th>
                        <th> </th>
                    </tr>
                </table> -->
            </div>
            <div class="mb-3">
            <div class="mb-3">
            <label for="key-output" class="form-label">Private key content:</label>
                <textarea class="form-control font-monospace" id="id_key-output" rows="6" readonly></textarea>
            </div>
            </div>

        </div>
    </body>
</html>
